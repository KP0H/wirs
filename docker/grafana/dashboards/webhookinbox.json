{
  "id": null,
  "uid": "webhookinbox",
  "title": "Webhook Inbox Overview",
  "schemaVersion": 39,
  "version": 1,
  "refresh": "30s",
  "timezone": "",
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "panels": [
    {
      "type": "timeseries",
      "title": "API Ingest Rate",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 0, "y": 0, "w": 12, "h": 8 },
      "fieldConfig": {
        "defaults": {
          "unit": "ops",
          "decimals": 2
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum by (source) (rate(webhookinbox_events_total{status=\"ingested\"}[5m]))",
          "legendFormat": "{{source}}",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "title": "Delivery Attempts",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 12, "y": 0, "w": 12, "h": 8 },
      "fieldConfig": {
        "defaults": {
          "decimals": 2,
          "unit": "ops"
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum by (result) (rate(webhookinbox_deliveries_total[5m]))",
          "legendFormat": "{{result}}",
          "refId": "A"
        }
      ]
    },
    {
      "type": "stat",
      "title": "Signature Failures (15m)",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 0, "y": 8, "w": 6, "h": 6 },
      "fieldConfig": {
        "defaults": {
          "decimals": 0
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum(increase(webhookinbox_signature_validation_failures_total[15m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "stat",
      "title": "Rate Limit Blocks (15m)",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 6, "y": 8, "w": 6, "h": 6 },
      "fieldConfig": {
        "defaults": {
          "decimals": 0
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum(increase(webhookinbox_rate_limit_blocked_total[15m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "stat",
      "title": "Idempotent Hits (15m)",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 12, "y": 8, "w": 6, "h": 6 },
      "fieldConfig": {
        "defaults": {
          "decimals": 0
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum(increase(webhookinbox_idempotent_hits_total[15m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "stat",
      "title": "Event Intake (15m)",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 18, "y": 8, "w": 6, "h": 6 },
      "fieldConfig": {
        "defaults": {
          "decimals": 0
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum(increase(webhookinbox_events_total[15m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "title": "Load Test Request Rate",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 0, "y": 14, "w": 12, "h": 8 },
      "fieldConfig": {
        "defaults": {
          "unit": "ops",
          "decimals": 2
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum by (scenario, outcome) (rate(webhookinbox_loadtest_requests_total[2m]))",
          "legendFormat": "{{scenario}} • {{outcome}}",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "title": "Load Test Latency",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 12, "y": 14, "w": 12, "h": 8 },
      "fieldConfig": {
        "defaults": {
          "unit": "ms",
          "decimals": 2
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "histogram_quantile(0.5, sum(rate(webhookinbox_loadtest_latency_ms_bucket[5m])) by (le))",
          "legendFormat": "p50",
          "refId": "A"
        },
        {
          "expr": "histogram_quantile(0.9, sum(rate(webhookinbox_loadtest_latency_ms_bucket[5m])) by (le))",
          "legendFormat": "p90",
          "refId": "B"
        },
        {
          "expr": "histogram_quantile(0.99, sum(rate(webhookinbox_loadtest_latency_ms_bucket[5m])) by (le))",
          "legendFormat": "p99",
          "refId": "C"
        }
      ]
    },
    {
      "type": "stat",
      "title": "Load Test Failures (15m)",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 0, "y": 22, "w": 6, "h": 6 },
      "fieldConfig": {
        "defaults": {
          "decimals": 0
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum(increase(webhookinbox_loadtest_requests_total{outcome!=\"success\"}[15m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "stat",
      "title": "Load Test Success (15m)",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 6, "y": 22, "w": 6, "h": 6 },
      "fieldConfig": {
        "defaults": {
          "decimals": 0
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum(increase(webhookinbox_loadtest_requests_total{outcome=\"success\"}[15m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "stat",
      "title": "Active Load Test Requests",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 12, "y": 22, "w": 6, "h": 6 },
      "fieldConfig": {
        "defaults": {
          "decimals": 0
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "max(webhookinbox_loadtest_inflight)",
          "refId": "A"
        }
      ]
    },
    {
      "type": "stat",
      "title": "Replay Duplicates (15m)",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "gridPos": { "x": 18, "y": 22, "w": 6, "h": 6 },
      "fieldConfig": {
        "defaults": {
          "decimals": 0
        },
        "overrides": []
      },
      "targets": [
        {
          "expr": "sum(increase(webhookinbox_events_total{status=\"duplicate\"}[15m]))",
          "refId": "A"
        }
      ]
    }
  ],
  "templating": {
    "list": []
  }
}
